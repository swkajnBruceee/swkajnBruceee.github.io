<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>博客评论系统搭建指南：从零开始配置Waline与Giscus | Bruce's Blog</title><meta name="author" content="BruceLee"><meta name="copyright" content="BruceLee"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="博客评论系统搭建指南：从零开始配置Waline与Giscus一个优秀的博客评论系统能够促进读者互动，建立社区氛围，同时也为博主提供宝贵的反馈。在经过多次尝试和对比后，我最终选择了Waline和Giscus作为我的博客评论系统。本文将详细记录这两个系统的部署过程、配置细节以及自定义样式的实现，希望能为同样在寻找合适评论系统的你提供参考。 🤔 评论系统的选择考量在选择评论系统时，我主要考虑了以下几个">
<meta property="og:type" content="article">
<meta property="og:title" content="博客评论系统搭建指南：从零开始配置Waline与Giscus">
<meta property="og:url" content="https://swkajnbruceee.github.io/2023/07/20/%E5%8D%9A%E5%AE%A2%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F%E6%90%AD%E5%BB%BA%E6%8C%87%E5%8D%97/index.html">
<meta property="og:site_name" content="Bruce&#39;s Blog">
<meta property="og:description" content="博客评论系统搭建指南：从零开始配置Waline与Giscus一个优秀的博客评论系统能够促进读者互动，建立社区氛围，同时也为博主提供宝贵的反馈。在经过多次尝试和对比后，我最终选择了Waline和Giscus作为我的博客评论系统。本文将详细记录这两个系统的部署过程、配置细节以及自定义样式的实现，希望能为同样在寻找合适评论系统的你提供参考。 🤔 评论系统的选择考量在选择评论系统时，我主要考虑了以下几个">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://images.unsplash.com/photo-1516321318423-f06f85e504b3?ixlib=rb-1.2.1&auto=format&fit=crop&w=1920&q=80">
<meta property="article:published_time" content="2023-07-20T08:45:00.000Z">
<meta property="article:modified_time" content="2025-08-03T08:14:50.668Z">
<meta property="article:author" content="BruceLee">
<meta property="article:tag" content="Hexo">
<meta property="article:tag" content="Waline">
<meta property="article:tag" content="Giscus">
<meta property="article:tag" content="评论系统">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://images.unsplash.com/photo-1516321318423-f06f85e504b3?ixlib=rb-1.2.1&auto=format&fit=crop&w=1920&q=80"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "博客评论系统搭建指南：从零开始配置Waline与Giscus",
  "url": "https://swkajnbruceee.github.io/2023/07/20/%E5%8D%9A%E5%AE%A2%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F%E6%90%AD%E5%BB%BA%E6%8C%87%E5%8D%97/",
  "image": "https://images.unsplash.com/photo-1516321318423-f06f85e504b3?ixlib=rb-1.2.1&auto=format&fit=crop&w=1920&q=80",
  "datePublished": "2023-07-20T08:45:00.000Z",
  "dateModified": "2025-08-03T08:14:50.668Z",
  "author": [
    {
      "@type": "Person",
      "name": "BruceLee",
      "url": "https://swkajnbruceee.github.io/"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://swkajnbruceee.github.io/2023/07/20/%E5%8D%9A%E5%AE%A2%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F%E6%90%AD%E5%BB%BA%E6%8C%87%E5%8D%97/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '博客评论系统搭建指南：从零开始配置Waline与Giscus',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="/css/giscus-waline-style.css"><link rel="stylesheet" href="/css/waline-custom.css"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet"><meta name="generator" content="Hexo 7.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="wizard-scene"><div class="wizard-objects"><div class="wizard-square"></div><div class="wizard-circle"></div><div class="wizard-triangle"></div></div><div class="wizard"><div class="wizard-body"></div><div class="wizard-right-arm"><div class="wizard-right-hand"></div></div><div class="wizard-left-arm"><div class="wizard-left-hand"></div></div><div class="wizard-head"><div class="wizard-beard"></div><div class="wizard-face"><div class="wizard-adds"></div></div><div class="wizard-hat"><div class="wizard-hat-of-the-hat"></div><div class="wizard-four-point-star --first"></div><div class="wizard-four-point-star --second"></div><div class="wizard-four-point-star --third"></div></div></div></div></div></div><script async="async">(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  let loadingStartTime = Date.now()
  let isLoaded = false
  
  const preloader = {
    endLoading: () => {
      const loadingTime = Date.now() - loadingStartTime
      const minLoadingTime = 2000 // 最少显示2秒
      
      if (loadingTime < minLoadingTime) {
        // 如果加载时间不足2秒，延迟关闭动画
        setTimeout(() => {
          $body.style.overflow = 'auto'
          $loadingBox.classList.add('loaded')
        }, minLoadingTime - loadingTime)
      } else {
        $body.style.overflow = 'auto'
        $loadingBox.classList.add('loaded')
      }
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
      loadingStartTime = Date.now()
      isLoaded = false
    }
  }

  preloader.initLoading()
  
  // 页面加载完成后关闭动画
  window.addEventListener('load', () => {
    if (!isLoaded) {
      isLoaded = true
      preloader.endLoading()
    }
  })
  
  // 超时保护，最多显示8秒
  setTimeout(function(){
    if (!isLoaded) {
      isLoaded = true
      preloader.endLoading()
    }
  }, 8000);

  // 禁用PJAX时的加载动画，只在首次加载时显示
  // if (false) {
  //   btf.addGlobalFn('pjaxSend', preloader.initLoading, 'preloader_init')
  //   btf.addGlobalFn('pjaxComplete', preloader.endLoading, 'preloader_end')
  // }
})()</script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src= "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkxvYWRpbmcuLi48L3RleHQ+PC9zdmc+" data-lazy-src="/img/butterfly-icon.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">6</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">13</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-book"></i><span> 文章</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder"></i><span> 我的</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-user"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image: url(https://images.unsplash.com/photo-1516321318423-f06f85e504b3?ixlib=rb-1.2.1&amp;auto=format&amp;fit=crop&amp;w=1920&amp;q=80);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Bruce's Blog</span></a><a class="nav-page-title" href="/"><span class="site-name">博客评论系统搭建指南：从零开始配置Waline与Giscus</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-book"></i><span> 文章</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder"></i><span> 我的</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-user"></i><span> 关于</span></a></div></div><div class="nav-right"><div class="nav-search-container"><input class="nav-search-input" id="nav-search-input" type="text" placeholder="搜索文章..."><div class="nav-search-results" id="nav-search-results"></div></div><div id="darkmode"><i class="fas fa-adjust fa-fw"></i></div><div id="toggle-menu"><i class="fas fa-bars fa-fw"></i></div></div></div></nav><div id="post-info"><h1 class="post-title">博客评论系统搭建指南：从零开始配置Waline与Giscus</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-07-20T08:45:00.000Z" title="发表于 2023-07-20 16:45:00">2023-07-20</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-08-03T08:14:50.668Z" title="更新于 2025-08-03 16:14:50">2025-08-03</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/">技术分享</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">5.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>20分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/2023/07/20/%E5%8D%9A%E5%AE%A2%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F%E6%90%AD%E5%BB%BA%E6%8C%87%E5%8D%97/#post-comment"><span class="waline-comment-count" data-path="/2023/07/20/%E5%8D%9A%E5%AE%A2%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F%E6%90%AD%E5%BB%BA%E6%8C%87%E5%8D%97/"><i class="fa-solid fa-spinner fa-spin"></i></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><div id="post-outdate-notice" data="{&quot;limitDay&quot;:500,&quot;messagePrev&quot;:&quot;本文最后更新于&quot;,&quot;messageNext&quot;:&quot;天前，内容可能已经过时。&quot;,&quot;postUpdate&quot;:&quot;2025-08-03 16:14:50&quot;}" hidden></div><h1 id="博客评论系统搭建指南：从零开始配置Waline与Giscus"><a href="#博客评论系统搭建指南：从零开始配置Waline与Giscus" class="headerlink" title="博客评论系统搭建指南：从零开始配置Waline与Giscus"></a>博客评论系统搭建指南：从零开始配置Waline与Giscus</h1><p>一个优秀的博客评论系统能够促进读者互动，建立社区氛围，同时也为博主提供宝贵的反馈。在经过多次尝试和对比后，我最终选择了Waline和Giscus作为我的博客评论系统。本文将详细记录这两个系统的部署过程、配置细节以及自定义样式的实现，希望能为同样在寻找合适评论系统的你提供参考。</p>
<h2 id="🤔-评论系统的选择考量"><a href="#🤔-评论系统的选择考量" class="headerlink" title="🤔 评论系统的选择考量"></a>🤔 评论系统的选择考量</h2><p>在选择评论系统时，我主要考虑了以下几个方面：</p>
<ul>
<li><strong>数据控制权</strong>：评论数据是否由自己掌控</li>
<li><strong>隐私保护</strong>：是否尊重用户隐私，不过度收集信息</li>
<li><strong>易用性</strong>：对访客是否友好，登录方式是否便捷</li>
<li><strong>功能完整性</strong>：是否支持回复、通知、表情等功能</li>
<li><strong>定制性</strong>：是否可以根据博客风格进行样式定制</li>
<li><strong>维护成本</strong>：部署和维护的复杂度和成本</li>
</ul>
<p>经过对比，我选择了Waline作为主力评论系统，同时配置了Giscus作为备选，两者可以灵活切换。</p>
<h2 id="🌟-Waline评论系统"><a href="#🌟-Waline评论系统" class="headerlink" title="🌟 Waline评论系统"></a>🌟 Waline评论系统</h2><h3 id="我的Waline部署历程"><a href="#我的Waline部署历程" class="headerlink" title="我的Waline部署历程"></a>我的Waline部署历程</h3><p>在部署Waline评论系统的过程中，我经历了一些波折，最终找到了最适合我的解决方案：</p>
<ol>
<li><p><strong>最初尝试MongoDB + Vercel</strong>：我最初计划使用MongoDB Atlas作为数据库，通过Vercel部署Waline。配置过程顺利，但在关键的管理员注册环节，我遇到了问题 - 无论如何尝试，都无法成功注册管理员账号，页面总是提示错误或无响应。</p>
</li>
<li><p><strong>考虑Railway部署</strong>：由于遇到的问题，我转向了Railway平台，它提供了更稳定的容器化环境。然而，Railway最近调整了定价策略，免费额度有限，长期使用需要付费，这不太符合我的个人博客需求。</p>
</li>
<li><p><strong>最终选择LeanCloud + Vercel</strong>：经过研究，我发现LeanCloud是Waline官方推荐的数据库解决方案，在国内访问稳定，配置也相对简单。结合Vercel的部署能力，这个组合既免费又高效，管理员注册问题也迎刃而解。</p>
</li>
</ol>
<p>这段经历让我明白，选择合适的技术栈不仅要考虑功能和性能，还要考虑稳定性、易用性和长期维护成本。</p>
<h3 id="为什么选择Vercel-LeanCloud部署Waline"><a href="#为什么选择Vercel-LeanCloud部署Waline" class="headerlink" title="为什么选择Vercel+LeanCloud部署Waline"></a>为什么选择Vercel+LeanCloud部署Waline</h3><p>Waline支持多种部署方式，如Vercel、Netlify、Railway等。经过实践，我发现Vercel+LeanCloud有以下优势：</p>
<ol>
<li><strong>免费且稳定</strong>：Vercel提供稳定的Serverless服务，免费额度对个人博客完全够用</li>
<li><strong>自动化部署</strong>：支持GitHub仓库关联，代码更新后自动部署</li>
<li><strong>全球CDN</strong>：内置Vercel Edge Network，访问速度快</li>
<li><strong>简单的部署流程</strong>：一键部署，配置简单</li>
<li><strong>LeanCloud集成</strong>：可以方便地使用LeanCloud作为数据库，国内访问稳定</li>
<li><strong>丰富的插件生态</strong>：支持各种扩展功能</li>
</ol>
<h3 id="LeanCloud准备工作"><a href="#LeanCloud准备工作" class="headerlink" title="LeanCloud准备工作"></a>LeanCloud准备工作</h3><p>在部署Waline前，我们需要先准备好LeanCloud数据库。LeanCloud提供免费的云数据库服务，非常适合个人博客使用。</p>
<h4 id="1-注册LeanCloud账号"><a href="#1-注册LeanCloud账号" class="headerlink" title="1. 注册LeanCloud账号"></a>1. 注册LeanCloud账号</h4><p>访问<a target="_blank" rel="noopener" href="https://www.leancloud.cn/">LeanCloud官网</a>注册账号。</p>
<h4 id="2-创建应用"><a href="#2-创建应用" class="headerlink" title="2. 创建应用"></a>2. 创建应用</h4><ul>
<li>登录后点击「创建应用」</li>
<li>输入应用名称（如「博客评论系统」）</li>
<li>选择「开发版」（免费）</li>
<li>点击「创建」</li>
</ul>
<h4 id="3-创建数据库用户"><a href="#3-创建数据库用户" class="headerlink" title="3. 创建数据库用户"></a>3. 创建数据库用户</h4><ul>
<li>进入应用后，点击左侧菜单「设置」&gt;「应用凭证」</li>
<li>记录下「AppID」、「AppKey」和「服务器地址」（这些信息后续需要使用）</li>
</ul>
<h4 id="4-设置安全域名"><a href="#4-设置安全域名" class="headerlink" title="4. 设置安全域名"></a>4. 设置安全域名</h4><ul>
<li>点击左侧菜单「设置」&gt;「安全中心」</li>
<li>在「Web安全域名」中添加你的博客域名（如example.com）</li>
</ul>
<h4 id="5-常见问题与解决方案"><a href="#5-常见问题与解决方案" class="headerlink" title="5. 常见问题与解决方案"></a>5. 常见问题与解决方案</h4><p>在使用LeanCloud过程中，可能会遇到以下问题：</p>
<ul>
<li><strong>管理员注册失败</strong>：确保JWT_TOKEN已正确设置，并且在注册页面使用的是完整URL（包含&#x2F;ui&#x2F;register）</li>
<li><strong>评论提交失败</strong>：检查安全域名是否正确配置，确保包含了你的博客域名</li>
<li><strong>数据库连接错误</strong>：验证LEAN_ID、LEAN_KEY和LEAN_MASTER_KEY是否正确填写</li>
<li><strong>国内访问问题</strong>：如果使用国际版LeanCloud，可能需要设置代理或考虑使用国内版</li>
</ul>
<p>如果遇到持续的问题，可以尝试清空浏览器缓存，或查看浏览器控制台的错误信息进行排查。</p>
<h3 id="Vercel部署Waline"><a href="#Vercel部署Waline" class="headerlink" title="Vercel部署Waline"></a>Vercel部署Waline</h3><h4 id="1-注册Vercel账号"><a href="#1-注册Vercel账号" class="headerlink" title="1. 注册Vercel账号"></a>1. 注册Vercel账号</h4><p>访问<a target="_blank" rel="noopener" href="https://vercel.com/">Vercel官网</a>注册账号。建议使用GitHub账号登录，这样可以直接关联你的GitHub仓库。</p>
<h4 id="2-一键部署Waline"><a href="#2-一键部署Waline" class="headerlink" title="2. 一键部署Waline"></a>2. 一键部署Waline</h4><ul>
<li>访问<a target="_blank" rel="noopener" href="https://vercel.com/new/clone?repository-url=https://github.com/walinejs/waline/tree/main/example">Waline的Vercel部署模板</a></li>
<li>点击「Deploy」按钮</li>
<li>登录你的Vercel账号</li>
<li>填写项目名称（如「my-blog-comment」）</li>
<li>点击「Deploy」开始部署</li>
</ul>
<h4 id="3-配置环境变量"><a href="#3-配置环境变量" class="headerlink" title="3. 配置环境变量"></a>3. 配置环境变量</h4><p>部署完成后，需要配置以下环境变量：</p>
<ul>
<li>点击刚刚创建的项目</li>
<li>选择「Settings」&gt;「Environment Variables」</li>
<li>添加以下环境变量：<ul>
<li><code>LEAN_ID</code>：填入LeanCloud的AppID</li>
<li><code>LEAN_KEY</code>：填入LeanCloud的AppKey</li>
<li><code>LEAN_SERVER</code>：填入LeanCloud的服务器地址</li>
<li><code>JWT_TOKEN</code>：生成一个随机字符串作为JWT密钥（可以使用<a target="_blank" rel="noopener" href="https://1password.com/password-generator/">随机字符串生成器</a>）</li>
</ul>
</li>
</ul>
<h4 id="4-获取Waline服务地址"><a href="#4-获取Waline服务地址" class="headerlink" title="4. 获取Waline服务地址"></a>4. 获取Waline服务地址</h4><ul>
<li>在项目页面，点击「Visit」按钮</li>
<li>复制生成的域名，如<code>https://my-blog-comment.vercel.app</code></li>
</ul>
<p>这个域名就是你的Waline服务地址，后续需要在博客中配置。</p>
<h3 id="Hexo-Butterfly主题配置Waline"><a href="#Hexo-Butterfly主题配置Waline" class="headerlink" title="Hexo Butterfly主题配置Waline"></a>Hexo Butterfly主题配置Waline</h3><p>有了Waline服务地址后，我们需要在Hexo的Butterfly主题中配置Waline评论系统：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Waline评论系统配置</span></span><br><span class="line"><span class="attr">waline:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">serverURL:</span> <span class="string">https://your-waline-server.vercel.app</span> <span class="comment"># 替换为你的Waline服务地址</span></span><br><span class="line">  <span class="attr">bg:</span> <span class="string">/img/comment_bg.png</span> <span class="comment"># 评论框背景图</span></span><br><span class="line">  <span class="attr">pageview:</span> <span class="literal">true</span> <span class="comment"># 是否开启浏览量统计</span></span><br><span class="line">  <span class="attr">option:</span></span><br><span class="line">    <span class="comment"># 以下为自定义选项</span></span><br><span class="line">    <span class="attr">locale:</span></span><br><span class="line">      <span class="attr">placeholder:</span> <span class="string">欢迎留言交流...</span> <span class="comment"># 评论框占位提示文字</span></span><br><span class="line">    <span class="attr">emoji:</span> <span class="comment"># 表情包配置</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/bilibili</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/weibo</span></span><br><span class="line">    <span class="attr">meta:</span> [<span class="string">nick</span>, <span class="string">mail</span>, <span class="string">link</span>] <span class="comment"># 评论者信息显示项</span></span><br><span class="line">    <span class="attr">requiredMeta:</span> [<span class="string">nick</span>, <span class="string">mail</span>] <span class="comment"># 必填项</span></span><br><span class="line">    <span class="attr">wordLimit:</span> <span class="number">500</span> <span class="comment"># 评论字数限制</span></span><br><span class="line">    <span class="attr">pageSize:</span> <span class="number">10</span> <span class="comment"># 评论分页大小</span></span><br><span class="line">    <span class="attr">login:</span> <span class="string">enable</span> <span class="comment"># 是否启用登录</span></span><br><span class="line">    <span class="attr">avatar:</span> <span class="string">mp</span> <span class="comment"># 默认头像类型</span></span><br></pre></td></tr></table></figure>

<h3 id="Waline高级配置"><a href="#Waline高级配置" class="headerlink" title="Waline高级配置"></a>Waline高级配置</h3><h4 id="邮件通知配置"><a href="#邮件通知配置" class="headerlink" title="邮件通知配置"></a>邮件通知配置</h4><p>为了让博主及时收到评论通知，可以配置邮件通知功能：</p>
<ol>
<li>在Vercel项目的”Environment Variables”中添加以下环境变量：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">SMTP_SERVICE=gmail  # 邮件服务提供商，如gmail、qq、163等</span><br><span class="line">SMTP_HOST=smtp.gmail.com  # SMTP服务器地址</span><br><span class="line">SMTP_PORT=465  # SMTP端口</span><br><span class="line">SMTP_USER=your-email@gmail.com  # 发送邮件的邮箱</span><br><span class="line">SMTP_PASS=your-password-or-token  # 邮箱密码或授权码</span><br><span class="line">SMTP_SECURE=true  # 是否使用SSL</span><br><span class="line">SITE_NAME=我的博客  # 网站名称</span><br><span class="line">SITE_URL=https://your-blog.com  # 网站地址</span><br><span class="line">ADMINISTRATOR_EMAIL=admin-email@gmail.com  # 管理员邮箱，用于接收评论通知</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>获取邮箱授权码的方法：<ul>
<li>QQ邮箱：设置 -&gt; 账户 -&gt; POP3&#x2F;IMAP&#x2F;SMTP&#x2F;Exchange&#x2F;CardDAV&#x2F;CalDAV服务 -&gt; 开启POP3&#x2F;SMTP服务 -&gt; 生成授权码</li>
<li>Gmail：账户设置 -&gt; 安全性 -&gt; 应用专用密码</li>
</ul>
</li>
</ol>
<h4 id="安全设置"><a href="#安全设置" class="headerlink" title="安全设置"></a>安全设置</h4><p>为了防止垃圾评论和恶意注册，可以配置以下安全设置：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">IPBLACKLIST=127.0.0.1,192.168.0.1  # 黑名单IP，多个IP用逗号分隔</span><br><span class="line">LIMIT_PER_MINUTE=10  # 每分钟评论次数限制</span><br><span class="line">LIMIT_PER_HOUR=50  # 每小时评论次数限制</span><br><span class="line">LIMIT_PER_DAY=100  # 每天评论次数限制</span><br><span class="line">FORBID_WORDS=敏感词1,敏感词2  # 禁止的关键词，多个关键词用逗号分隔</span><br><span class="line">DISALLOW_REGISTER=true  # 禁止注册，只允许管理员创建用户</span><br><span class="line">SECURE_DOMAINS=你的博客域名,二级域名等</span><br><span class="line">AKISMET_KEY=你的Akismet API密钥（用于垃圾评论过滤）</span><br></pre></td></tr></table></figure>

<h2 id="🔧-Giscus评论系统配置"><a href="#🔧-Giscus评论系统配置" class="headerlink" title="🔧 Giscus评论系统配置"></a>🔧 Giscus评论系统配置</h2><h3 id="为什么选择Giscus"><a href="#为什么选择Giscus" class="headerlink" title="为什么选择Giscus"></a>为什么选择Giscus</h3><p>Giscus是基于GitHub Discussions的评论系统，有以下优势：</p>
<ol>
<li><strong>零服务器成本</strong>：不需要自己部署服务器</li>
<li><strong>GitHub账号登录</strong>：对开发者友好</li>
<li><strong>Markdown支持</strong>：原生支持Markdown格式</li>
<li><strong>数据透明</strong>：所有评论都在GitHub Discussions中可见</li>
<li><strong>轻量级</strong>：加载速度快，不影响博客性能</li>
</ol>
<h3 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h3><h4 id="1-创建或选择GitHub仓库"><a href="#1-创建或选择GitHub仓库" class="headerlink" title="1. 创建或选择GitHub仓库"></a>1. 创建或选择GitHub仓库</h4><p>首先，你需要一个公开的GitHub仓库来存储评论。可以使用博客源码仓库，也可以创建一个专门的评论仓库。</p>
<h4 id="2-启用Discussions功能"><a href="#2-启用Discussions功能" class="headerlink" title="2. 启用Discussions功能"></a>2. 启用Discussions功能</h4><ul>
<li>进入仓库页面</li>
<li>点击”Settings”选项卡</li>
<li>在”Features”部分，勾选”Discussions”选项</li>
<li>点击”Save”保存设置</li>
</ul>
<h4 id="3-安装Giscus应用"><a href="#3-安装Giscus应用" class="headerlink" title="3. 安装Giscus应用"></a>3. 安装Giscus应用</h4><ul>
<li>访问<a target="_blank" rel="noopener" href="https://github.com/apps/giscus">Giscus App</a></li>
<li>点击”Install”</li>
<li>选择要安装的仓库（刚才启用Discussions的仓库）</li>
<li>完成安装</li>
</ul>
<h3 id="获取Giscus配置信息"><a href="#获取Giscus配置信息" class="headerlink" title="获取Giscus配置信息"></a>获取Giscus配置信息</h3><p>访问<a target="_blank" rel="noopener" href="https://giscus.app/">Giscus官网</a>，填写以下信息：</p>
<ol>
<li><strong>仓库</strong>：格式为<code>用户名/仓库名</code></li>
<li><strong>页面与Discussion映射关系</strong>：建议选择”Discussion的标题包含页面的pathname”</li>
<li><strong>Discussion分类</strong>：选择一个分类（如”Announcements”或”General”）</li>
<li><strong>主题</strong>：选择一个与你博客风格匹配的主题</li>
</ol>
<p>填写完成后，网站会生成一段配置代码，我们需要从中提取关键信息。</p>
<h3 id="获取正确的category-id"><a href="#获取正确的category-id" class="headerlink" title="获取正确的category_id"></a>获取正确的category_id</h3><p>有时候Giscus官网生成的<code>category_id</code>可能不正确，可以使用以下JavaScript脚本获取正确的ID：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在浏览器控制台中运行</span></span><br><span class="line"><span class="keyword">const</span> repo = <span class="string">&#x27;your-username/your-repo&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> category = <span class="string">&#x27;Announcements&#x27;</span>; <span class="comment">// 替换为你选择的分类名称</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">fetch</span>(<span class="string">`https://api.github.com/repos/<span class="subst">$&#123;repo&#125;</span>/discussions/categories`</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> response.<span class="title function_">json</span>())</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> categoryInfo = data.<span class="title function_">find</span>(<span class="function"><span class="params">c</span> =&gt;</span> c.<span class="property">name</span> === category);</span><br><span class="line">    <span class="keyword">if</span> (categoryInfo) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Category ID:&#x27;</span>, categoryInfo.<span class="property">id</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Category not found&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<h3 id="Hexo-Butterfly主题配置Giscus"><a href="#Hexo-Butterfly主题配置Giscus" class="headerlink" title="Hexo Butterfly主题配置Giscus"></a>Hexo Butterfly主题配置Giscus</h3><p>在Butterfly主题的配置文件中添加Giscus配置：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Giscus评论系统配置</span></span><br><span class="line"><span class="attr">giscus:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span> <span class="comment"># 默认关闭，需要时开启</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">your-username/your-repo</span> <span class="comment"># 替换为你的仓库</span></span><br><span class="line">  <span class="attr">repo_id:</span> <span class="string">R_kgDOxxxxx</span> <span class="comment"># 从Giscus生成的代码中获取</span></span><br><span class="line">  <span class="attr">category_id:</span> <span class="string">DIC_kwDOxxxxx</span> <span class="comment"># 使用上面脚本获取的正确ID</span></span><br><span class="line">  <span class="attr">theme:</span></span><br><span class="line">    <span class="attr">light:</span> <span class="string">light</span> <span class="comment"># 亮色主题</span></span><br><span class="line">    <span class="attr">dark:</span> <span class="string">dark</span> <span class="comment"># 暗色主题</span></span><br><span class="line">  <span class="attr">option:</span></span><br><span class="line">    <span class="attr">mapping:</span> <span class="string">pathname</span> <span class="comment"># 映射关系</span></span><br><span class="line">    <span class="attr">reactionsEnabled:</span> <span class="number">1</span> <span class="comment"># 启用反应</span></span><br><span class="line">    <span class="attr">emitMetadata:</span> <span class="number">0</span> <span class="comment"># 不发送元数据</span></span><br></pre></td></tr></table></figure>

<h2 id="🎨-评论系统样式定制"><a href="#🎨-评论系统样式定制" class="headerlink" title="🎨 评论系统样式定制"></a>🎨 评论系统样式定制</h2><h3 id="Waline样式定制"><a href="#Waline样式定制" class="headerlink" title="Waline样式定制"></a>Waline样式定制</h3><p>为了让Waline评论系统更好地融入博客风格，我对其进行了样式定制：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Waline评论区容器 - 高级磨砂卡片效果 */</span></span><br><span class="line"><span class="selector-class">.waline-container</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.95</span>);</span><br><span class="line">  <span class="attribute">backdrop-filter</span>: <span class="built_in">blur</span>(<span class="number">20px</span>);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">16px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.3</span>);</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">8px</span> <span class="number">32px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>);</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">2rem</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">1.5rem</span>;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">0.3s</span> ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.waline-container</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">12px</span> <span class="number">48px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.15</span>);</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">2px</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 评论编辑器 */</span></span><br><span class="line"><span class="selector-class">.wl-editor</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">12px</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>) <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">0.3s</span> ease <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.8</span>) <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">min-height</span>: <span class="number">120px</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="built_in">var</span>(--global-font), sans-serif <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.wl-editor</span><span class="selector-pseudo">:focus</span> &#123;</span><br><span class="line">  <span class="attribute">border-color</span>: <span class="built_in">var</span>(--theme-color) <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">2px</span> <span class="built_in">rgba</span>(<span class="built_in">var</span>(--theme-color-rgb), <span class="number">0.2</span>) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 评论按钮 */</span></span><br><span class="line"><span class="selector-class">.wl-btn</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">8px</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">border</span>: none <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--theme-color) <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">color</span>: white <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0.5rem</span> <span class="number">1.2rem</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">600</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">0.3s</span> ease <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">0.9rem</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.wl-btn</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.9</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">2px</span>) <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">4px</span> <span class="number">12px</span> <span class="built_in">rgba</span>(<span class="built_in">var</span>(--theme-color-rgb), <span class="number">0.4</span>) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 评论卡片 */</span></span><br><span class="line"><span class="selector-class">.wl-card</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">12px</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.8</span>) <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.05</span>) <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">0.3s</span> ease <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">1.5rem</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.wl-card</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.95</span>) <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">4px</span> <span class="number">16px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.08</span>) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 评论者头像 */</span></span><br><span class="line"><span class="selector-class">.wl-avatar</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">2px</span> solid <span class="built_in">rgba</span>(<span class="built_in">var</span>(--theme-color-rgb), <span class="number">0.2</span>) <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">0.3s</span> ease <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.wl-avatar</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>) <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">border-color</span>: <span class="built_in">var</span>(--theme-color) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 评论者信息 */</span></span><br><span class="line"><span class="selector-class">.wl-meta</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="built_in">var</span>(--global-font), sans-serif <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.wl-nick</span> &#123;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">600</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--font-color) <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">1rem</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 表情包选择器 */</span></span><br><span class="line"><span class="selector-class">.wl-emoji-popup</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">12px</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>) <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">8px</span> <span class="number">24px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.12</span>) <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.98</span>) <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">backdrop-filter</span>: <span class="built_in">blur</span>(<span class="number">20px</span>) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.wl-emoji</span> &#123;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">0.2s</span> ease <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.wl-emoji</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.2</span>) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 移动端适配 */</span></span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">max-width</span>: <span class="number">768px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.waline-container</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">1rem</span> <span class="meta">!important</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="selector-class">.wl-avatar</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">28px</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">28px</span> <span class="meta">!important</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="selector-class">.wl-head</span>,</span><br><span class="line">  <span class="selector-class">.wl-content</span>,</span><br><span class="line">  <span class="selector-class">.wl-meta</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0.5rem</span> <span class="meta">!important</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Giscus样式定制"><a href="#Giscus样式定制" class="headerlink" title="Giscus样式定制"></a>Giscus样式定制</h3><p>为了保持评论区风格的一致性，我将Giscus的样式也定制为类似Waline的风格：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Giscus容器 - 与Waline风格一致 */</span></span><br><span class="line"><span class="selector-class">.giscus</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.95</span>);</span><br><span class="line">  <span class="attribute">backdrop-filter</span>: <span class="built_in">blur</span>(<span class="number">20px</span>);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">16px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.3</span>);</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">8px</span> <span class="number">32px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>);</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">2rem</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">1.5rem</span>;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">0.3s</span> ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.giscus</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">12px</span> <span class="number">48px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.15</span>);</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">2px</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 评论框 */</span></span><br><span class="line"><span class="selector-class">.giscus</span> <span class="selector-class">.gsc-comment-box</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">12px</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>) <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.8</span>) <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">1.5rem</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.giscus</span> <span class="selector-class">.gsc-comment-box-textarea</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">12px</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">border</span>: none <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">min-height</span>: <span class="number">120px</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="built_in">var</span>(--global-font), sans-serif <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">1rem</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 按钮 */</span></span><br><span class="line"><span class="selector-class">.giscus</span> <span class="selector-class">.gsc-comment-box-buttons</span> <span class="selector-tag">button</span>,</span><br><span class="line"><span class="selector-class">.giscus</span> <span class="selector-class">.gsc-pagination-button</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">8px</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">border</span>: none <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--theme-color) <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">color</span>: white <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0.5rem</span> <span class="number">1.2rem</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">600</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">0.3s</span> ease <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">0.9rem</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.giscus</span> <span class="selector-class">.gsc-comment-box-buttons</span> <span class="selector-tag">button</span><span class="selector-pseudo">:hover</span>,</span><br><span class="line"><span class="selector-class">.giscus</span> <span class="selector-class">.gsc-pagination-button</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.9</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">2px</span>) <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">4px</span> <span class="number">12px</span> <span class="built_in">rgba</span>(<span class="built_in">var</span>(--theme-color-rgb), <span class="number">0.4</span>) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 评论项 */</span></span><br><span class="line"><span class="selector-class">.giscus</span> <span class="selector-class">.gsc-comment</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">12px</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.8</span>) <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.05</span>) <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">0.3s</span> ease <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">1.5rem</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">1rem</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.giscus</span> <span class="selector-class">.gsc-comment</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.95</span>) <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">4px</span> <span class="number">16px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.08</span>) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 头像 */</span></span><br><span class="line"><span class="selector-class">.giscus</span> <span class="selector-class">.gsc-comment-author-avatar</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">2px</span> solid <span class="built_in">rgba</span>(<span class="built_in">var</span>(--theme-color-rgb), <span class="number">0.2</span>) <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">0.3s</span> ease <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.giscus</span> <span class="selector-class">.gsc-comment-author-avatar</span> <span class="selector-tag">img</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>) <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">border-color</span>: <span class="built_in">var</span>(--theme-color) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 暗色模式适配 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-class">.giscus</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">30</span>, <span class="number">30</span>, <span class="number">30</span>, <span class="number">0.95</span>);</span><br><span class="line">  <span class="attribute">border-color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-class">.giscus</span> <span class="selector-class">.gsc-comment-box</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-class">.giscus</span> <span class="selector-class">.gsc-comment</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">40</span>, <span class="number">40</span>, <span class="number">40</span>, <span class="number">0.8</span>) <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">border-color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.1</span>) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="🔄-评论系统切换功能"><a href="#🔄-评论系统切换功能" class="headerlink" title="🔄 评论系统切换功能"></a>🔄 评论系统切换功能</h2><p>为了方便在Waline和Giscus之间切换，我编写了一个简单的切换脚本：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 评论系统切换脚本</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> yaml = <span class="built_in">require</span>(<span class="string">&#x27;js-yaml&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 配置文件路径</span></span><br><span class="line"><span class="keyword">const</span> configPath = path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;_config.butterfly.yml&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 读取配置文件</span></span><br><span class="line"><span class="keyword">let</span> config;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> fileContent = fs.<span class="title function_">readFileSync</span>(configPath, <span class="string">&#x27;utf8&#x27;</span>);</span><br><span class="line">  config = yaml.<span class="title function_">load</span>(fileContent);</span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;读取配置文件失败:&#x27;</span>, e);</span><br><span class="line">  process.<span class="title function_">exit</span>(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取当前启用的评论系统</span></span><br><span class="line"><span class="keyword">let</span> currentSystem = <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line"><span class="keyword">if</span> (config.<span class="property">waline</span> &amp;&amp; config.<span class="property">waline</span>.<span class="property">enable</span>) &#123;</span><br><span class="line">  currentSystem = <span class="string">&#x27;waline&#x27;</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (config.<span class="property">giscus</span> &amp;&amp; config.<span class="property">giscus</span>.<span class="property">enable</span>) &#123;</span><br><span class="line">  currentSystem = <span class="string">&#x27;giscus&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 切换评论系统</span></span><br><span class="line"><span class="keyword">const</span> targetSystem = process.<span class="property">argv</span>[<span class="number">2</span>];</span><br><span class="line"><span class="keyword">if</span> (!targetSystem || (targetSystem !== <span class="string">&#x27;waline&#x27;</span> &amp;&amp; targetSystem !== <span class="string">&#x27;giscus&#x27;</span>)) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`当前评论系统: <span class="subst">$&#123;currentSystem&#125;</span>`</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;使用方法: node switch-comments.js [waline|giscus]&#x27;</span>);</span><br><span class="line">  process.<span class="title function_">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 禁用所有评论系统</span></span><br><span class="line"><span class="keyword">if</span> (config.<span class="property">waline</span>) config.<span class="property">waline</span>.<span class="property">enable</span> = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">if</span> (config.<span class="property">giscus</span>) config.<span class="property">giscus</span>.<span class="property">enable</span> = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 启用目标评论系统</span></span><br><span class="line"><span class="keyword">if</span> (targetSystem === <span class="string">&#x27;waline&#x27;</span> &amp;&amp; config.<span class="property">waline</span>) &#123;</span><br><span class="line">  config.<span class="property">waline</span>.<span class="property">enable</span> = <span class="literal">true</span>;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;已切换到Waline评论系统&#x27;</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;提醒: 确保你的Waline服务已正确部署&#x27;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (targetSystem === <span class="string">&#x27;giscus&#x27;</span> &amp;&amp; config.<span class="property">giscus</span>) &#123;</span><br><span class="line">  config.<span class="property">giscus</span>.<span class="property">enable</span> = <span class="literal">true</span>;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;已切换到Giscus评论系统&#x27;</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;提醒: 确保你的GitHub仓库已启用Discussions功能&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 保存配置文件</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> newContent = yaml.<span class="title function_">dump</span>(config);</span><br><span class="line">  fs.<span class="title function_">writeFileSync</span>(configPath, newContent, <span class="string">&#x27;utf8&#x27;</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;配置文件已更新，请重新生成博客以应用更改&#x27;</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;保存配置文件失败:&#x27;</span>, e);</span><br><span class="line">  process.<span class="title function_">exit</span>(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用方法很简单，只需在终端中运行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">node switch-comments.js waline  <span class="comment"># 切换到Waline</span></span><br><span class="line"><span class="comment"># 或</span></span><br><span class="line">node switch-comments.js giscus  <span class="comment"># 切换到Giscus</span></span><br></pre></td></tr></table></figure>

<h2 id="📊-评论系统管理"><a href="#📊-评论系统管理" class="headerlink" title="📊 评论系统管理"></a>📊 评论系统管理</h2><h3 id="Waline评论管理"><a href="#Waline评论管理" class="headerlink" title="Waline评论管理"></a>Waline评论管理</h3><p>Waline提供了一个管理后台，可以方便地管理评论：</p>
<ol>
<li>访问你的Waline服务地址，如<code>https://your-waline-server.vercel.app/ui/register</code></li>
<li>注册一个管理员账号（首次注册的用户自动成为管理员）</li>
<li>登录后，你可以：<ul>
<li>查看所有评论</li>
<li>审核评论（通过&#x2F;拒绝）</li>
<li>回复评论</li>
<li>删除评论</li>
<li>管理用户</li>
</ul>
</li>
</ol>
<h3 id="Giscus评论管理"><a href="#Giscus评论管理" class="headerlink" title="Giscus评论管理"></a>Giscus评论管理</h3><p>Giscus的评论管理直接在GitHub Discussions中进行：</p>
<ol>
<li>访问你的GitHub仓库</li>
<li>点击”Discussions”选项卡</li>
<li>你可以：<ul>
<li>查看所有评论</li>
<li>回复评论</li>
<li>删除评论</li>
<li>锁定讨论</li>
<li>转移讨论到其他分类</li>
</ul>
</li>
</ol>
<h2 id="🔍-评论系统性能优化"><a href="#🔍-评论系统性能优化" class="headerlink" title="🔍 评论系统性能优化"></a>🔍 评论系统性能优化</h2><h3 id="Waline性能优化"><a href="#Waline性能优化" class="headerlink" title="Waline性能优化"></a>Waline性能优化</h3><ol>
<li><strong>CDN加速</strong>：使用CDN加速Waline前端资源</li>
</ol>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">waline:</span></span><br><span class="line">  <span class="attr">option:</span></span><br><span class="line">    <span class="attr">cdn:</span> <span class="string">https://cdn.jsdelivr.net/npm/@waline/client@v2/dist/waline.js</span></span><br><span class="line">    <span class="attr">cssUrl:</span> <span class="string">https://cdn.jsdelivr.net/npm/@waline/client@v2/dist/waline.css</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li><strong>延迟加载</strong>：只有当用户滚动到评论区时才加载Waline</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 延迟加载Waline</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">lazyLoadWaline</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> walineContainer = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;waline&#x27;</span>);</span><br><span class="line">  <span class="keyword">if</span> (!walineContainer) <span class="keyword">return</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">const</span> observer = <span class="keyword">new</span> <span class="title class_">IntersectionObserver</span>(<span class="function">(<span class="params">entries</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (entries[<span class="number">0</span>].<span class="property">isIntersecting</span>) &#123;</span><br><span class="line">      <span class="comment">// 加载Waline</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="title class_">Waline</span> === <span class="string">&#x27;undefined&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> script = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;script&#x27;</span>);</span><br><span class="line">        script.<span class="property">src</span> = <span class="string">&#x27;https://cdn.jsdelivr.net/npm/@waline/client@v2/dist/waline.js&#x27;</span>;</span><br><span class="line">        script.<span class="property">onload</span> = initWaline;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="property">head</span>.<span class="title function_">appendChild</span>(script);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title function_">initWaline</span>();</span><br><span class="line">      &#125;</span><br><span class="line">      observer.<span class="title function_">disconnect</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  </span><br><span class="line">  observer.<span class="title function_">observe</span>(walineContainer);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 初始化页面时调用</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, lazyLoadWaline);</span><br></pre></td></tr></table></figure>

<h3 id="Giscus性能优化"><a href="#Giscus性能优化" class="headerlink" title="Giscus性能优化"></a>Giscus性能优化</h3><ol>
<li><strong>延迟加载</strong>：同样，只有当用户滚动到评论区时才加载Giscus</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 延迟加载Giscus</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">lazyLoadGiscus</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> giscusContainer = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;giscus-container&#x27;</span>);</span><br><span class="line">  <span class="keyword">if</span> (!giscusContainer) <span class="keyword">return</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">const</span> observer = <span class="keyword">new</span> <span class="title class_">IntersectionObserver</span>(<span class="function">(<span class="params">entries</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (entries[<span class="number">0</span>].<span class="property">isIntersecting</span>) &#123;</span><br><span class="line">      <span class="comment">// 加载Giscus</span></span><br><span class="line">      <span class="keyword">const</span> script = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;script&#x27;</span>);</span><br><span class="line">      script.<span class="property">src</span> = <span class="string">&#x27;https://giscus.app/client.js&#x27;</span>;</span><br><span class="line">      script.<span class="title function_">setAttribute</span>(<span class="string">&#x27;data-repo&#x27;</span>, <span class="string">&#x27;your-username/your-repo&#x27;</span>);</span><br><span class="line">      script.<span class="title function_">setAttribute</span>(<span class="string">&#x27;data-repo-id&#x27;</span>, <span class="string">&#x27;R_kgDOxxxxx&#x27;</span>);</span><br><span class="line">      script.<span class="title function_">setAttribute</span>(<span class="string">&#x27;data-category&#x27;</span>, <span class="string">&#x27;Announcements&#x27;</span>);</span><br><span class="line">      script.<span class="title function_">setAttribute</span>(<span class="string">&#x27;data-category-id&#x27;</span>, <span class="string">&#x27;DIC_kwDOxxxxx&#x27;</span>);</span><br><span class="line">      script.<span class="title function_">setAttribute</span>(<span class="string">&#x27;data-mapping&#x27;</span>, <span class="string">&#x27;pathname&#x27;</span>);</span><br><span class="line">      script.<span class="title function_">setAttribute</span>(<span class="string">&#x27;data-reactions-enabled&#x27;</span>, <span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">      script.<span class="title function_">setAttribute</span>(<span class="string">&#x27;data-emit-metadata&#x27;</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">      script.<span class="title function_">setAttribute</span>(<span class="string">&#x27;data-theme&#x27;</span>, <span class="string">&#x27;light&#x27;</span>);</span><br><span class="line">      script.<span class="title function_">setAttribute</span>(<span class="string">&#x27;data-lang&#x27;</span>, <span class="string">&#x27;zh-CN&#x27;</span>);</span><br><span class="line">      script.<span class="property">crossOrigin</span> = <span class="string">&#x27;anonymous&#x27;</span>;</span><br><span class="line">      script.<span class="property">async</span> = <span class="literal">true</span>;</span><br><span class="line">      </span><br><span class="line">      giscusContainer.<span class="title function_">appendChild</span>(script);</span><br><span class="line">      observer.<span class="title function_">disconnect</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  </span><br><span class="line">  observer.<span class="title function_">observe</span>(giscusContainer);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 初始化页面时调用</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, lazyLoadGiscus);</span><br></pre></td></tr></table></figure>

<h2 id="🔒-评论系统安全性考量"><a href="#🔒-评论系统安全性考量" class="headerlink" title="🔒 评论系统安全性考量"></a>🔒 评论系统安全性考量</h2><h3 id="Waline安全配置"><a href="#Waline安全配置" class="headerlink" title="Waline安全配置"></a>Waline安全配置</h3><ol>
<li><strong>限制评论频率</strong>：防止垃圾评论</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">LIMIT_PER_MINUTE=10  # 每分钟最多评论次数</span><br><span class="line">LIMIT_PER_HOUR=50    # 每小时最多评论次数</span><br><span class="line">LIMIT_PER_DAY=100    # 每天最多评论次数</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><strong>评论审核</strong>：开启评论审核功能</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">COMMENT_AUDIT=true  # 评论需要审核后才显示</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><strong>IP黑名单</strong>：屏蔽恶意IP</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IPBLACKLIST=1.2.3.4,5.6.7.8  # 黑名单IP列表</span><br></pre></td></tr></table></figure>

<ol start="4">
<li><strong>安全域名</strong>：限制评论来源</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SECURE_DOMAINS=your-blog.com,www.your-blog.com  # 允许的域名</span><br></pre></td></tr></table></figure>

<h3 id="Giscus安全考量"><a href="#Giscus安全考量" class="headerlink" title="Giscus安全考量"></a>Giscus安全考量</h3><ol>
<li><strong>仓库权限</strong>：确保Giscus应用只有必要的权限</li>
<li><strong>评论审核</strong>：可以在GitHub Discussions设置中开启”Limit who can comment”选项</li>
<li><strong>内容过滤</strong>：GitHub自带的内容过滤可以有效防止垃圾内容</li>
</ol>
<h2 id="🎁-总结与展望"><a href="#🎁-总结与展望" class="headerlink" title="🎁 总结与展望"></a>🎁 总结与展望</h2><p>通过本文的配置，我们成功搭建了两套功能完善、样式美观的评论系统。Waline提供了更丰富的功能和更高的定制性，而Giscus则更加轻量和简单。根据不同的需求，可以灵活选择使用哪一个。</p>
<h3 id="LeanCloud作为Waline数据库的优势"><a href="#LeanCloud作为Waline数据库的优势" class="headerlink" title="LeanCloud作为Waline数据库的优势"></a>LeanCloud作为Waline数据库的优势</h3><p>经过实际使用，我发现LeanCloud作为Waline的数据库有以下优势：</p>
<ol>
<li><strong>稳定可靠</strong>：服务稳定性高，几乎不会出现连接中断的情况</li>
<li><strong>配置简单</strong>：相比MongoDB，配置步骤更少，更容易上手</li>
<li><strong>国内访问友好</strong>：对于中国用户，访问速度更快，无需额外的代理设置</li>
<li><strong>免费额度充足</strong>：对于个人博客，免费额度完全够用</li>
<li><strong>官方推荐</strong>：作为Waline官方推荐的数据库方案，兼容性更好</li>
</ol>
<h3 id="维护建议"><a href="#维护建议" class="headerlink" title="维护建议"></a>维护建议</h3><p>为了确保评论系统长期稳定运行，建议定期进行以下维护工作：</p>
<ol>
<li><strong>数据备份</strong>：定期导出LeanCloud中的评论数据，防止意外丢失</li>
<li><strong>检查更新</strong>：关注Waline的版本更新，及时升级以获取新功能和安全修复</li>
<li><strong>监控使用量</strong>：关注LeanCloud的资源使用情况，避免超出免费额度</li>
<li><strong>安全审查</strong>：定期检查评论内容，删除垃圾评论和不良信息</li>
</ol>
<p>未来，我计划进一步优化评论系统：</p>
<ol>
<li><strong>集成更多登录方式</strong>：如微信、QQ等国内常用平台</li>
<li><strong>添加评论打分功能</strong>：让读者可以对文章进行评分</li>
<li><strong>开发评论数据分析工具</strong>：分析评论趋势和热点</li>
<li><strong>优化移动端体验</strong>：提供更好的移动端评论体验</li>
</ol>
<p>希望这篇文章能帮助你为自己的博客选择和配置合适的评论系统。如果你有任何问题或建议，欢迎在评论区留言交流！</p>
<hr>
<blockquote>
<p>本文首发于个人博客，转载请注明出处。<br>如果你喜欢这篇文章，欢迎分享给更多的人！</p>
</blockquote>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://swkajnbruceee.github.io">BruceLee</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://swkajnbruceee.github.io/2023/07/20/%E5%8D%9A%E5%AE%A2%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F%E6%90%AD%E5%BB%BA%E6%8C%87%E5%8D%97/">https://swkajnbruceee.github.io/2023/07/20/%E5%8D%9A%E5%AE%A2%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F%E6%90%AD%E5%BB%BA%E6%8C%87%E5%8D%97/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://swkajnbruceee.github.io" target="_blank">Bruce's Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Hexo/">Hexo</a><a class="post-meta__tags" href="/tags/Waline/">Waline</a><a class="post-meta__tags" href="/tags/Giscus/">Giscus</a><a class="post-meta__tags" href="/tags/%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F/">评论系统</a></div><div class="post-share"><div class="social-share" data-image="https://images.unsplash.com/photo-1516321318423-f06f85e504b3?ixlib=rb-1.2.1&amp;auto=format&amp;fit=crop&amp;w=1920&amp;q=80" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related full-width" href="/2025/06/25/hello-world/" title="Hello World"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">Hello World</div></div><div class="info-2"><div class="info-item-1">Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new &quot;My New Post&quot;  More info: Writing Run server1$ hexo server  More info: Server Generate static files1$ hexo generate  More info: Generating Deploy to remote sites1$ hexo deploy  More info: Deployment </div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2025/06/26/Hexo%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%B8%A9%E5%9D%91%E8%AE%B0/" title="Hexo博客搭建踩坑记"><img class="cover" src= "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkxvYWRpbmcuLi48L3RleHQ+PC9zdmc+" data-lazy-src="https://images.unsplash.com/photo-1555066931-4365d14bab8c?ixlib=rb-1.2.1&auto=format&fit=crop&w=1920&q=80" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-06-26</div><div class="info-item-2">Hexo博客搭建踩坑记</div></div><div class="info-2"><div class="info-item-1">🚀 Hexo博客搭建踩坑记🧩 问题一：YAML 配置的”变形记”问题配置 _config.yml 时，发现实际语法与文档不一致，特别是缩进规则。 解决方案    确认 YAML 语法规则： 使用 空格缩进 而非制表符 键值对格式 key: value    🦋 问题二：Butterfly 主题的”华丽转身”问题主题仓库结构变更，导致配置失效。 解决步骤：  发现配置文件迁移到 _config.butterfly.yml 使用 AI 生成兼容模板：1234theme: butterflybutterfly:  menu:    Home: / || fas fa-home  🔌 问题三：4000 端口的”神秘占用”问题启动时报错： 1FATAL Port 4000 has been used.  解决方案：  查找占用进程：1lsof -i :4000 指定新端口启动：1hexo server -p 4001 永久修改配置：12server:  port: 4001  💡 实用技巧 分支管理： 由于我之前已经搭建过一个博客，而且部署在master分支里，恰巧GitHub在...</div></div></div></a><a class="pagination-related" href="/2025/07/15/%E5%8D%9A%E5%AE%A2UI%E4%BC%98%E5%8C%96%E4%B9%8B%E6%97%85/" title="博客UI优化之旅：打造个性化Hexo博客"><img class="cover" src= "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkxvYWRpbmcuLi48L3RleHQ+PC9zdmc+" data-lazy-src="https://images.unsplash.com/photo-1507721999472-8ed4421c4af2?ixlib=rb-1.2.1&auto=format&fit=crop&w=1920&q=80" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-07-15</div><div class="info-item-2">博客UI优化之旅：打造个性化Hexo博客</div></div><div class="info-2"><div class="info-item-1">博客UI优化之旅：打造个性化Hexo博客在搭建个人博客的过程中，除了内容的质量，博客的视觉体验同样重要。一个精心设计的UI不仅能提升用户体验，还能彰显个人品味。本文将分享我在优化Hexo博客UI过程中的经验和技巧，希望能为同样热爱折腾的你提供一些启发。 🎨 整体设计理念在开始具体的优化工作前，我花了不少时间思考博客的整体设计理念。最终，我确定了以下几点：  简约而不简单：避免过多的视觉干扰，但保留足够的设计细节 响应式设计：在各种设备上都能提供良好的浏览体验 性能优先：确保加载速度快，交互流畅 个性化表达：融入个人风格，与大众博客有所区别  带着这些理念，我开始了一系列的优化工作。 🚀 加载体验优化自定义加载动画网站加载时的第一印象非常重要。我设计了一个简洁的巫师加载动画，让等待变得有趣。 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849// 修复巫师加载动画显示时间和隐藏问题(function() &#123;  &#x27;use strict...</div></div></div></a><a class="pagination-related" href="/2025/07/24/%E5%A6%82%E4%BD%95%E9%AB%98%E6%95%88%E5%86%99%E5%8D%9A%E5%AE%A2/" title="如何高效写博客"><img class="cover" src= "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkxvYWRpbmcuLi48L3RleHQ+PC9zdmc+" data-lazy-src="https://images.unsplash.com/photo-1486312338219-ce68d2c6f44d?ixlib=rb-4.0.3" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-07-24</div><div class="info-item-2">如何高效写博客</div></div><div class="info-2"><div class="info-item-1">写博客是分享知识和记录思考的好方式，但如何高效地写出高质量的博客文章呢？   前言在数字化时代，博客已经成为知识分享和个人品牌建设的重要工具。无论你是技术开发者、设计师还是其他领域的专家，掌握高效的博客写作技巧都能让你事半功倍。 正文1. 选择合适的写作工具Markdown 编辑器推荐 Typora: 所见即所得的 Markdown 编辑器 VS Code: 配合 Markdown 插件，功能强大 Obsidian: 适合构建知识网络 Notion: 在线协作，功能丰富  图片处理工具 PicGo: 图片上传工具，支持多种图床 Unsplash: 高质量免费图片素材 TinyPNG: 图片压缩工具  2. 文章结构规划一篇好的技术博客通常包含： 12345671. 吸引人的标题2. 简洁的前言（问题背景）3. 清晰的目录结构4. 详细的解决方案5. 代码示例和截图6. 总结和思考7. 参考资料  3. 写作技巧标题优化 使用数字：《5个提高代码质量的技巧》 突出价值：《从0到1搭建个人博客》 制造悬念：《这个CSS技巧让我的网站性能提升50%》  内容组织 使用小标题分割内容 适...</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="waline-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-custom-profile"><div class="custom-profile-card"><div class="profile-badge"><i class="fas fa-home"></i><span>🎓 大学生知识博客</span></div><div class="profile-avatar-container"><div class="profile-avatar"><img src= "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkxvYWRpbmcuLi48L3RleHQ+PC9zdmc+" data-lazy-src="/img/photo.jpg" alt="avatar"/><div class="avatar-badge">🐶</div></div></div><div class="profile-info"><div class="profile-name">BruceLee</div><div class="profile-description">生活明朗，万物可爱</div></div><div class="profile-hover-content"><div class="hover-text">这里分享计算机科学、算法学习、编程技巧和学术研究心得。涵盖数据结构、Web开发、机器学习等领域的学习笔记和实践经验。希望能与同样热爱学习的朋友们一起进步，共同探索技术的无限可能。</div></div><div class="profile-social"><a class="social-btn" href="https://github.com/swkajnBruceee" target="_blank" rel="noopener"><i class="fab fa-github"></i></a><a class="social-btn" href="#" target="_blank" rel="noopener"><i class="fab fa-discord"></i></a></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%9A%E5%AE%A2%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F%E6%90%AD%E5%BB%BA%E6%8C%87%E5%8D%97%EF%BC%9A%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E9%85%8D%E7%BD%AEWaline%E4%B8%8EGiscus"><span class="toc-number">1.</span> <span class="toc-text">博客评论系统搭建指南：从零开始配置Waline与Giscus</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%A4%94-%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F%E7%9A%84%E9%80%89%E6%8B%A9%E8%80%83%E9%87%8F"><span class="toc-number">1.1.</span> <span class="toc-text">🤔 评论系统的选择考量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8C%9F-Waline%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F"><span class="toc-number">1.2.</span> <span class="toc-text">🌟 Waline评论系统</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%88%91%E7%9A%84Waline%E9%83%A8%E7%BD%B2%E5%8E%86%E7%A8%8B"><span class="toc-number">1.2.1.</span> <span class="toc-text">我的Waline部署历程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%80%89%E6%8B%A9Vercel-LeanCloud%E9%83%A8%E7%BD%B2Waline"><span class="toc-number">1.2.2.</span> <span class="toc-text">为什么选择Vercel+LeanCloud部署Waline</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LeanCloud%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="toc-number">1.2.3.</span> <span class="toc-text">LeanCloud准备工作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%B3%A8%E5%86%8CLeanCloud%E8%B4%A6%E5%8F%B7"><span class="toc-number">1.2.3.1.</span> <span class="toc-text">1. 注册LeanCloud账号</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%88%9B%E5%BB%BA%E5%BA%94%E7%94%A8"><span class="toc-number">1.2.3.2.</span> <span class="toc-text">2. 创建应用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E7%94%A8%E6%88%B7"><span class="toc-number">1.2.3.3.</span> <span class="toc-text">3. 创建数据库用户</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E8%AE%BE%E7%BD%AE%E5%AE%89%E5%85%A8%E5%9F%9F%E5%90%8D"><span class="toc-number">1.2.3.4.</span> <span class="toc-text">4. 设置安全域名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E4%B8%8E%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">1.2.3.5.</span> <span class="toc-text">5. 常见问题与解决方案</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Vercel%E9%83%A8%E7%BD%B2Waline"><span class="toc-number">1.2.4.</span> <span class="toc-text">Vercel部署Waline</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%B3%A8%E5%86%8CVercel%E8%B4%A6%E5%8F%B7"><span class="toc-number">1.2.4.1.</span> <span class="toc-text">1. 注册Vercel账号</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E4%B8%80%E9%94%AE%E9%83%A8%E7%BD%B2Waline"><span class="toc-number">1.2.4.2.</span> <span class="toc-text">2. 一键部署Waline</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-number">1.2.4.3.</span> <span class="toc-text">3. 配置环境变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E8%8E%B7%E5%8F%96Waline%E6%9C%8D%E5%8A%A1%E5%9C%B0%E5%9D%80"><span class="toc-number">1.2.4.4.</span> <span class="toc-text">4. 获取Waline服务地址</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Hexo-Butterfly%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AEWaline"><span class="toc-number">1.2.5.</span> <span class="toc-text">Hexo Butterfly主题配置Waline</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Waline%E9%AB%98%E7%BA%A7%E9%85%8D%E7%BD%AE"><span class="toc-number">1.2.6.</span> <span class="toc-text">Waline高级配置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%82%AE%E4%BB%B6%E9%80%9A%E7%9F%A5%E9%85%8D%E7%BD%AE"><span class="toc-number">1.2.6.1.</span> <span class="toc-text">邮件通知配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E5%85%A8%E8%AE%BE%E7%BD%AE"><span class="toc-number">1.2.6.2.</span> <span class="toc-text">安全设置</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%94%A7-Giscus%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE"><span class="toc-number">1.3.</span> <span class="toc-text">🔧 Giscus评论系统配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%80%89%E6%8B%A9Giscus"><span class="toc-number">1.3.1.</span> <span class="toc-text">为什么选择Giscus</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="toc-number">1.3.2.</span> <span class="toc-text">准备工作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%88%9B%E5%BB%BA%E6%88%96%E9%80%89%E6%8B%A9GitHub%E4%BB%93%E5%BA%93"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">1. 创建或选择GitHub仓库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%90%AF%E7%94%A8Discussions%E5%8A%9F%E8%83%BD"><span class="toc-number">1.3.2.2.</span> <span class="toc-text">2. 启用Discussions功能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%AE%89%E8%A3%85Giscus%E5%BA%94%E7%94%A8"><span class="toc-number">1.3.2.3.</span> <span class="toc-text">3. 安装Giscus应用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96Giscus%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF"><span class="toc-number">1.3.3.</span> <span class="toc-text">获取Giscus配置信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E6%AD%A3%E7%A1%AE%E7%9A%84category-id"><span class="toc-number">1.3.4.</span> <span class="toc-text">获取正确的category_id</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Hexo-Butterfly%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AEGiscus"><span class="toc-number">1.3.5.</span> <span class="toc-text">Hexo Butterfly主题配置Giscus</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%A8-%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F%E6%A0%B7%E5%BC%8F%E5%AE%9A%E5%88%B6"><span class="toc-number">1.4.</span> <span class="toc-text">🎨 评论系统样式定制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Waline%E6%A0%B7%E5%BC%8F%E5%AE%9A%E5%88%B6"><span class="toc-number">1.4.1.</span> <span class="toc-text">Waline样式定制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Giscus%E6%A0%B7%E5%BC%8F%E5%AE%9A%E5%88%B6"><span class="toc-number">1.4.2.</span> <span class="toc-text">Giscus样式定制</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%94%84-%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F%E5%88%87%E6%8D%A2%E5%8A%9F%E8%83%BD"><span class="toc-number">1.5.</span> <span class="toc-text">🔄 评论系统切换功能</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%93%8A-%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86"><span class="toc-number">1.6.</span> <span class="toc-text">📊 评论系统管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Waline%E8%AF%84%E8%AE%BA%E7%AE%A1%E7%90%86"><span class="toc-number">1.6.1.</span> <span class="toc-text">Waline评论管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Giscus%E8%AF%84%E8%AE%BA%E7%AE%A1%E7%90%86"><span class="toc-number">1.6.2.</span> <span class="toc-text">Giscus评论管理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%94%8D-%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96"><span class="toc-number">1.7.</span> <span class="toc-text">🔍 评论系统性能优化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Waline%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96"><span class="toc-number">1.7.1.</span> <span class="toc-text">Waline性能优化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Giscus%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96"><span class="toc-number">1.7.2.</span> <span class="toc-text">Giscus性能优化</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%94%92-%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F%E5%AE%89%E5%85%A8%E6%80%A7%E8%80%83%E9%87%8F"><span class="toc-number">1.8.</span> <span class="toc-text">🔒 评论系统安全性考量</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Waline%E5%AE%89%E5%85%A8%E9%85%8D%E7%BD%AE"><span class="toc-number">1.8.1.</span> <span class="toc-text">Waline安全配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Giscus%E5%AE%89%E5%85%A8%E8%80%83%E9%87%8F"><span class="toc-number">1.8.2.</span> <span class="toc-text">Giscus安全考量</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%81-%E6%80%BB%E7%BB%93%E4%B8%8E%E5%B1%95%E6%9C%9B"><span class="toc-number">1.9.</span> <span class="toc-text">🎁 总结与展望</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#LeanCloud%E4%BD%9C%E4%B8%BAWaline%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E4%BC%98%E5%8A%BF"><span class="toc-number">1.9.1.</span> <span class="toc-text">LeanCloud作为Waline数据库的优势</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%B4%E6%8A%A4%E5%BB%BA%E8%AE%AE"><span class="toc-number">1.9.2.</span> <span class="toc-text">维护建议</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/07/24/%E5%A6%82%E4%BD%95%E9%AB%98%E6%95%88%E5%86%99%E5%8D%9A%E5%AE%A2/" title="如何高效写博客"><img src= "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkxvYWRpbmcuLi48L3RleHQ+PC9zdmc+" data-lazy-src="https://images.unsplash.com/photo-1486312338219-ce68d2c6f44d?ixlib=rb-4.0.3" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="如何高效写博客"/></a><div class="content"><a class="title" href="/2025/07/24/%E5%A6%82%E4%BD%95%E9%AB%98%E6%95%88%E5%86%99%E5%8D%9A%E5%AE%A2/" title="如何高效写博客">如何高效写博客</a><time datetime="2025-07-24T10:15:00.000Z" title="发表于 2025-07-24 18:15:00">2025-07-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/07/15/%E5%8D%9A%E5%AE%A2UI%E4%BC%98%E5%8C%96%E4%B9%8B%E6%97%85/" title="博客UI优化之旅：打造个性化Hexo博客"><img src= "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkxvYWRpbmcuLi48L3RleHQ+PC9zdmc+" data-lazy-src="https://images.unsplash.com/photo-1507721999472-8ed4421c4af2?ixlib=rb-1.2.1&amp;auto=format&amp;fit=crop&amp;w=1920&amp;q=80" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="博客UI优化之旅：打造个性化Hexo博客"/></a><div class="content"><a class="title" href="/2025/07/15/%E5%8D%9A%E5%AE%A2UI%E4%BC%98%E5%8C%96%E4%B9%8B%E6%97%85/" title="博客UI优化之旅：打造个性化Hexo博客">博客UI优化之旅：打造个性化Hexo博客</a><time datetime="2025-07-15T06:30:00.000Z" title="发表于 2025-07-15 14:30:00">2025-07-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/06/26/Hexo%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%B8%A9%E5%9D%91%E8%AE%B0/" title="Hexo博客搭建踩坑记"><img src= "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkxvYWRpbmcuLi48L3RleHQ+PC9zdmc+" data-lazy-src="https://images.unsplash.com/photo-1555066931-4365d14bab8c?ixlib=rb-1.2.1&amp;auto=format&amp;fit=crop&amp;w=1920&amp;q=80" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Hexo博客搭建踩坑记"/></a><div class="content"><a class="title" href="/2025/06/26/Hexo%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%B8%A9%E5%9D%91%E8%AE%B0/" title="Hexo博客搭建踩坑记">Hexo博客搭建踩坑记</a><time datetime="2025-06-26T05:42:00.000Z" title="发表于 2025-06-26 13:42:00">2025-06-26</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/06/26/Question-of-N-Queen/" title="Question of N Queen">Question of N Queen</a><time datetime="2025-06-26T03:59:32.000Z" title="发表于 2025-06-26 11:59:32">2025-06-26</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/06/25/hello-world/" title="Hello World">Hello World</a><time datetime="2025-06-25T05:53:40.483Z" title="发表于 2025-06-25 13:53:40">2025-06-25</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;2024 - 2025 By BruceLee</span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(() => {
  let initFn = window.walineFn || null
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = null

  const destroyWaline = ele => ele.destroy()

  const initWaline = (Fn, el = document, path = window.location.pathname) => {
    const waline = Fn({
      el: el.querySelector('#waline-wrap'),
      serverURL: 'https://myblogwalinecomments.vercel.app/',
      pageview: false,
      dark: 'html[data-theme="dark"]',
      comment: true,
      ...option,
      path: isShuoshuo ? path : (option && option.path) || path
    })

    if (isShuoshuo) {
      window.shuoshuoComment.destroyWaline = () => {
        destroyWaline(waline)
        if (el.children.length) {
          el.innerHTML = ''
          el.classList.add('no-comment')
        }
      }
    }
  }

  const loadWaline = (el, path) => {
    if (initFn) initWaline(initFn, el, path)
    else {
      btf.getCSS('https://cdn.jsdelivr.net/npm/@waline/client/dist/waline.min.css')
        .then(() => import('https://cdn.jsdelivr.net/npm/@waline/client/dist/waline.min.js'))
        .then(({ init }) => {
          initFn = init || Waline.init
          initWaline(initFn, el, path)
          window.walineFn = initFn
        })
    }
  }

  if (isShuoshuo) {
    'Waline' === 'Waline'
      ? window.shuoshuoComment = { loadComment: loadWaline } 
      : window.loadOtherComment = loadWaline
    return
  }

  if ('Waline' === 'Waline' || !false) {
    if (false) btf.loadComment(document.getElementById('waline-wrap'),loadWaline)
    else setTimeout(loadWaline, 0)
  } else {
    window.loadOtherComment = loadWaline
  }
})()</script></div><script src="/js/loading-fix.js"></script><script src="/js/darkmode-fix.js"></script><script src="/js/nav-search.js"></script><script src="/js/search-enhance.js"></script><script src="/js/ai-summary.js"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>