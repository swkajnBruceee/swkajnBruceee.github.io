/* Waline 评论区垂直对齐修复 - 终极强制解决方案 */
/* 使用最激进的CSS重写方法，确保100%生效 */

/* 使用最高优先级和通用选择器 - 强制覆盖所有可能的结构 */
* {
  /* 针对所有包含wl-head类的元素 */
}

*[class*="wl-head"] {
  display: flex !important;
  align-items: flex-start !important;
  gap: 12px !important;
  padding: 12px 16px !important;
  background: var(--bg-color, #f7f9fe) !important;
  border-bottom: 1px solid rgba(0,0,0,0.05) !important;
  box-sizing: border-box !important;
  position: relative !important;
  flex-wrap: nowrap !important;
  min-height: 60px !important;
}

/* 使用CSS的最高优先级 - 内联样式级别 */
.wl-head[style],
.wl-head {
  display: flex !important;
  align-items: flex-start !important;
  gap: 12px !important;
  padding: 12px 16px !important;
  box-sizing: border-box !important;
  position: relative !important;
  flex-wrap: nowrap !important;
  min-height: 60px !important;
}

/* 2. 强制所有头像元素对齐 - 使用最通用的选择器 */
*[class*="wl-avatar"],
*[class*="wl-head"] img,
*[class*="wl-head"] *[class*="avatar"],
*[class*="wl-card"] img[src*="avatar"],
*[class*="wl-item"] img[src*="avatar"],
div[id*="waline"] img,
div[class*="waline"] img,
.waline img,
#waline img {
  width: 44px !important;
  height: 44px !important;
  border-radius: 50% !important;
  margin: 0 !important;
  padding: 0 !important;
  flex-shrink: 0 !important;
  object-fit: cover !important;
  border: 2px solid white !important;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1) !important;
  display: block !important;
  vertical-align: top !important;
  align-self: flex-start !important;
  float: none !important;
  position: relative !important;
}

/* 3. 强制所有用户信息区域对齐 - 使用最通用的选择器 */
*[class*="wl-user"],
*[class*="wl-head"] > *:not(img):not([class*="avatar"]),
*[class*="wl-head"] > div:not([class*="avatar"]),
*[class*="wl-head"] > span:not([class*="avatar"]),
*[class*="wl-card"] > *:first-child > *:not(img),
*[class*="wl-item"] > *:first-child > *:not(img),
div[id*="waline"] *[class*="wl-head"] > *:not(img),
div[class*="waline"] *[class*="wl-head"] > *:not(img),
.waline *[class*="wl-head"] > *:not(img),
#waline *[class*="wl-head"] > *:not(img) {
  flex: 1 !important;
  margin: 0 !important;
  padding: 0 !important;
  display: flex !important;
  flex-direction: column !important;
  justify-content: flex-start !important;
  align-items: flex-start !important;
  align-self: flex-start !important;
  min-height: 44px !important;
  float: none !important;
  position: relative !important;
}

/* 4. 强制所有昵称元素对齐 - 使用最通用的选择器 */
*[class*="wl-nick"],
*[class*="wl-head"] a,
*[class*="wl-head"] *[class*="nick"],
*[class*="wl-user"] a:first-child,
*[class*="wl-user"] > *:first-child,
*[class*="wl-card"] a[href*="#"],
*[class*="wl-item"] a[href*="#"],
div[id*="waline"] a,
div[class*="waline"] a,
.waline a,
#waline a {
  margin: 0 !important;
  padding: 0 !important;
  font-size: 15px !important;
  font-weight: 600 !important;
  line-height: 1.4 !important;
  color: var(--font-color, #4c4948) !important;
  display: block !important;
  text-decoration: none !important;
  vertical-align: top !important;
  align-self: flex-start !important;
  float: none !important;
  position: relative !important;
}

/* 强制时间和其他信息的位置 */
.waline-container .wl-card .wl-head .wl-time,
.waline .wl-card .wl-head .wl-time,
div[class*="waline"] .wl-card .wl-head .wl-time,
.wl-list .wl-card .wl-head .wl-time {
  margin: 2px 0 0 0 !important;
  padding: 0 !important;
  font-size: 12px !important;
  color: var(--font-color-secondary, #666) !important;
  display: block !important;
  line-height: 1.3 !important;
}

/* 强制重置所有可能影响布局的样式 */
.wl-head,
.wl-head *,
.wl-card .wl-head,
.wl-card .wl-head * {
  box-sizing: border-box !important;
  float: none !important;
  position: relative !important;
  transform: none !important;
  top: auto !important;
  left: auto !important;
  right: auto !important;
  bottom: auto !important;
  margin-top: 0 !important;
  margin-bottom: 0 !important;
}

/* 确保评论内容区域正确显示 */
.waline-container .wl-card .wl-content,
.waline .wl-card .wl-content,
div[class*="waline"] .wl-card .wl-content,
.wl-list .wl-card .wl-content {
  padding: 16px !important;
  margin: 0 !important;
  line-height: 1.6 !important;
  font-size: 14px !important;
  color: var(--font-color, #4c4948) !important;
}

/* 移动端适配 */
@media (max-width: 768px) {
  .waline-container .wl-card .wl-head,
  .waline .wl-card .wl-head,
  div[class*="waline"] .wl-card .wl-head,
  .wl-list .wl-card .wl-head {
    gap: 10px !important;
    padding: 10px 12px !important;
  }
  
  .waline-container .wl-card .wl-head .wl-avatar,
  .waline .wl-card .wl-head .wl-avatar,
  div[class*="waline"] .wl-card .wl-head .wl-avatar,
  .wl-list .wl-card .wl-head .wl-avatar,
  .wl-head img[class*="avatar"],
  .wl-head img[src*="avatar"] {
    width: 36px !important;
    height: 36px !important;
  }
  
  .waline-container .wl-card .wl-head .wl-user,
  .waline .wl-card .wl-head .wl-user,
  div[class*="waline"] .wl-card .wl-head .wl-user,
  .wl-list .wl-card .wl-head .wl-user {
    min-height: 36px !important;
  }
  
  .waline-container .wl-card .wl-head .wl-nick,
  .waline .wl-card .wl-head .wl-nick,
  div[class*="waline"] .wl-card .wl-head .wl-nick,
  .wl-list .wl-card .wl-head .wl-nick,
  .wl-head a[class*="nick"] {
    font-size: 14px !important;
  }
}

/* 夜间模式适配 */
[data-theme="dark"] .waline-container .wl-card .wl-head,
[data-theme="dark"] .waline .wl-card .wl-head,
[data-theme="dark"] div[class*="waline"] .wl-card .wl-head,
[data-theme="dark"] .wl-list .wl-card .wl-head {
  background: var(--bg-color-dark, #2d2d2d) !important;
  border-bottom-color: rgba(255,255,255,0.1) !important;
}

[data-theme="dark"] .waline-container .wl-card .wl-head .wl-nick,
[data-theme="dark"] .waline .wl-card .wl-head .wl-nick,
[data-theme="dark"] div[class*="waline"] .wl-card .wl-head .wl-nick,
[data-theme="dark"] .wl-list .wl-card .wl-head .wl-nick,
[data-theme="dark"] .wl-head a[class*="nick"] {
  color: var(--font-color-dark, #e0e0e0) !important;
}

[data-theme="dark"] .waline-container .wl-card .wl-head .wl-time,
[data-theme="dark"] .waline .wl-card .wl-head .wl-time,
[data-theme="dark"] div[class*="waline"] .wl-card .wl-head .wl-time,
[data-theme="dark"] .wl-list .wl-card .wl-head .wl-time {
  color: var(--font-color-secondary-dark, #909399) !important;
}

[data-theme="dark"] .waline-container .wl-card .wl-content,
[data-theme="dark"] .waline .wl-card .wl-content,
[data-theme="dark"] div[class*="waline"] .wl-card .wl-content,
[data-theme="dark"] .wl-list .wl-card .wl-content {
  color: var(--font-color-dark, #e0e0e0) !important;
}